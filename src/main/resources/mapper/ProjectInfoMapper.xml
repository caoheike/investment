<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.howard.investment.dao.ProjectInfoDao">
	<!-- 按照状态查询项目信息 -->
    <select id="queryProjectInfo" resultType="map" parameterType="java.lang.String">
  	 select * from xmxx where xmfl=#{projectStatus} and deptid=#{deptid}
    </select>
    <!-- 项目删除 -->
   <delete id="deleteProjectInfo" parameterType="String">
     delete from xmxx where id=#{projectId}
    </delete>
    
    <select id="queryDeptInfo" resultType="map">
        select * from dept
    </select>
    
    
       <select id="deptInfo" resultType="map" parameterType="java.lang.String">
        select * from xmxx where id=#{id}
<!--         ,dept where id=#{id} and dept.id=xmxx.deptid -->
   
    </select>
    
    	<update id="updataInfo" parameterType="map">
    	 update xmxx set file1=#{file1},file2=#{file2},file3=#{file3},file4=#{file4},file5=#{file5} where id=#{id}
    	</update>
    
    	<insert id="sendMessage" parameterType="map" > 
    		  insert into xminfo ([fsz],[infotype],[bmdm],[xmmc],[title],[xmdwmc],[inputdate],[readdate],[infostate],[xmid]) values(#{fsz},#{xminfotype},#{bmdm},#{xmmc},#{title},#{xmdwmc},'','',0,#{xmid})
    		
    	</insert> 
    	
    		<!-- 查询本部门 【】未未处理消息【】 	 -->
    	  	<select id="juuser" parameterType="map" resultType="map"> 
    	  	
    	       select * from xminfo where infotype=#{msgtype}  and 1=1     <!-- and xminfotype -->
    	   		<if test='bmdm !=null and bmdm!=""'>
    	   		 and bmdm=#{bmdm}
    	   		</if>
    		
    	</select> 
    	
    	    	<update id="updateInfos" parameterType="map">
    	 		update xmxx set status=#{status} where id=#{id}
    	</update>
    	
    	 	    	<update id="updatexiaoxi" parameterType="map">
    	 		update xminfo set infostate=1 where xminfo_id=#{xxid}
    	</update>
    	
    

    
</mapper>